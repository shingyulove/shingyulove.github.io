<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¥³åƒ•æ‰‹ç¹ª Chekki (æ‰‹æ©Ÿå®Œç¾ç‰ˆ)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=RocknRoll+One&family=Yomogi&display=swap');

        :root {
            --bg-color: #fff0f5;
            --card-bg: #ffffff;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(#ffc2d1 15%, transparent 16%);
            background-size: 25px 25px;
            
            /* --- æ‰‹æ©Ÿé©é…é—œéµä¿®æ”¹ --- */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* æ”¹ç‚ºå¾ä¸Šå¾€ä¸‹æ’ï¼Œé¿å…ä¸­é–“æ’é–‹ */
            
            min-height: 100vh; /* ç›¸å®¹èˆŠç€è¦½å™¨ */
            min-height: 100dvh; /* é—œéµï¼šå‹•æ…‹è¦–å£é«˜åº¦ï¼Œæ‰£é™¤ IG å·¥å…·åˆ— */
            
            margin: 0;
            padding-top: 20px; /* é ‚éƒ¨ç•™ç™½ */
            padding-bottom: 40px; /* åº•éƒ¨ç•™ç™½ */
            
            overflow-y: auto; /* å…è¨±å‚ç›´æ»¾å‹•ï¼Œé˜²æ­¢æŒ‰éˆ•æŒ‰ä¸åˆ° */
            overflow-x: hidden;
            user-select: none;
            font-family: 'Yomogi', cursive;
            -webkit-tap-highlight-color: transparent;
        }

        h1 {
            color: #ff6b8b;
            font-family: 'RocknRoll One', sans-serif;
            margin: 0 0 15px 0;
            font-size: 1.5rem; /* æ‰‹æ©Ÿæ¨™é¡Œæ”¹å°ä¸€é» */
            text-shadow: 2px 2px 0 #fff;
            z-index: 10;
        }

        /* --- æ§åˆ¶å°æŒ‰éˆ• --- */
        .controls { 
            margin-top: 20px; 
            z-index: 100;
            padding-bottom: 20px; /* ç¢ºä¿åº•éƒ¨æœ‰ç©ºé–“ */
        }

        button {
            background: #ff6b8b;
            color: white;
            border: none;
            padding: 15px 40px; /* æŒ‰éˆ•åŠ å¤§ï¼Œæ–¹ä¾¿æ‰‹æ©Ÿé»æ“Š */
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            font-family: 'RocknRoll One', sans-serif;
            cursor: pointer;
            box-shadow: 0 6px 0 #d84060, 0 10px 10px rgba(0,0,0,0.1);
            transition: transform 0.1s;
            touch-action: manipulation; /* å„ªåŒ–è§¸æ§åæ‡‰ */
        }
        
        button:active { 
            transform: translateY(6px); 
            box-shadow: 0 0 0 #d84060; 
        }

        /* --- æ‹ç«‹å¾—å¡ç‰‡ --- */
        .instax {
            position: relative;
            width: 340px;
            height: 540px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            transform-origin: top center; /* ç¸®æ”¾æ™‚é ä¸Šå°é½Š */
            flex-shrink: 0; /* é˜²æ­¢è¢«å£“ç¸® */
        }

        /* --- æ‰‹æ©Ÿè¢å¹•é©é… (Media Query) --- */
        @media (max-width: 380px) {
            .instax {
                /* å¦‚æœè¢å¹•å¾ˆçª„ï¼Œæ•´é«”ç¸®å° 85% é¡¯ç¤º */
                transform: scale(0.85);
                margin-bottom: -60px; /* è£œå„Ÿç¸®æ”¾ç”¢ç”Ÿçš„åº•éƒ¨ç©ºç™½ */
            }
            h1 {
                font-size: 1.3rem;
            }
        }

        .photo-area {
            position: absolute;
            top: 30px;
            left: 20px;
            width: 300px;
            height: 380px;
            background-color: #eee;
            background-image: url('https://placehold.co/600x800/ffe6eb/ff8da1?text=Maid+Photo'); 
            background-size: cover;
            background-position: center;
            z-index: 1;
            border: 1px solid #eee;
        }

        .canvas-layer {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 10;
            pointer-events: none;
        }

        /* ç°½åçµ„ä»¶ */
        .signature-group {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            transform-origin: center;
        }

        .sig-name {
            font-family: 'RocknRoll One', sans-serif;
            font-size: 2.8rem;
            color: #ff4081;
            line-height: 1;
            white-space: nowrap;
            opacity: 0.9; 
        }

        .sig-date {
            font-family: 'Dela Gothic One', cursive;
            font-size: 1.2rem;
            color: #333;
            margin-top: 5px;
            opacity: 0.8;
        }

        /* åœ–æ¡ˆçµ„ä»¶ */
        .doodle-item {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 20;
            mix-blend-mode: multiply; 
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .sticker-effect {
            mix-blend-mode: normal !important;
            filter: drop-shadow(0px 0px 0px white) !important;
        }

        .text-item {
            position: absolute;
            z-index: 25;
            font-weight: bold;
            white-space: nowrap;
            mix-blend-mode: multiply;
            line-height: 1;
        }

        @keyframes pop {
            from { transform: scale(0) rotate(0deg); opacity: 0; }
            to { opacity: 0.9; } 
        }

    </style>
</head>
<body>

    <h1>ğŸ¨ å¥³åƒ•æ‰‹ç¹ª Chekki</h1>

    <!-- æ‹ç«‹å¾—å¡ç‰‡ -->
    <div class="instax">
        <div class="photo-area"></div>
        <div class="canvas-layer" id="canvas"></div>
    </div>

    <!-- æŒ‰éˆ• -->
    <div class="controls">
        <button onclick="generateArt()">âœ¨ ç”Ÿæˆç°½åèˆ‡å¡—é´‰ âœ¨</button>
    </div>

    <script>
        // ================= è³‡æ–™åº« =================
        const colors = ["#ff7eb3", "#ff6b6b", "#7afcff", "#feff9c", "#b39ddb", "#ffab91", "#81ecec"];
        const maidNames = ["Miku", "Rina", "Hana", "Momo", "Yuki", "Alice"];
        const jpTexts = ["å¤§å¥½ã", "æ¨ã—â™¡", "ã«ã‚ƒã‚“", "ã‚ã–ã¨", "LOVE", "ç¥å¯¾å¿œ", "èŒãˆ", "Chu!"];

        const doodles = [
            { type: 'fill', path: 'M50,90 C20,60 0,40 20,20 C35,5 50,25 50,25 C50,25 65,5 80,20 C100,40 80,60 50,90 Z' },
            { type: 'fill', path: 'M50,5 L60,35 L95,35 L70,55 L80,90 L50,70 L20,90 L30,55 L5,35 L40,35 Z' },
            { type: 'stroke', path: 'M50,50 m-20,0 a20,20 0 1,1 40,0 a20,20 0 1,1 -40,0 a15,15 0 1,1 30,0', strokeWidth: 4 },
            { type: 'stroke', path: 'M50,10 L50,90 M10,50 L90,50 M25,25 L75,75 M75,25 L25,75', strokeWidth: 3 },
            { type: 'fill', path: 'M20,80 Q10,10 50,30 Q90,10 80,80 Z' },
            { type: 'fill', path: 'M50,50 L10,30 Q5,50 10,70 L50,50 L90,70 Q95,50 90,30 Z' },
            { type: 'stroke', path: 'M50,50 Q50,20 70,40 T90,50 T70,60 T50,80 T30,60 T10,50 T30,40 Z', strokeWidth: 3 },
            { type: 'fill', path: 'M30,60 L30,20 L70,10 L70,50 L30,60 M20,70 A10,10 0 1,1 40,70 A10,10 0 1,1 20,70' }
        ];

        let occupiedRects = [];

        // ================= é‚è¼¯å€ =================

        function generateArt() {
            const canvas = document.getElementById('canvas');
            canvas.innerHTML = '';
            occupiedRects = [];

            drawWobblyBorder(canvas);
            drawSignature(canvas);

            const textCount = 1 + Math.floor(Math.random() * 2);
            for(let i=0; i<textCount; i++) drawText(canvas);

            const doodleCount = 4 + Math.floor(Math.random() * 4);
            for(let i=0; i<doodleCount; i++) drawDoodle(canvas);
        }

        function drawSignature(container) {
            const group = document.createElement('div');
            group.className = 'signature-group';
            
            const name = maidNames[Math.floor(Math.random() * maidNames.length)];
            const today = new Date();
            const dateStr = `${today.getFullYear()}.${today.getMonth()+1}.${today.getDate()}`;

            group.innerHTML = `
                <div class="sig-name">${name} <span style="font-size:0.6em">â™¡</span></div>
                <div class="sig-date">${dateStr}</div>
            `;

            container.appendChild(group);

            const rect = group.getBoundingClientRect();
            const w = 200; // ä¼°ç®—å¯¬åº¦ï¼Œé¿å…è®€å– dom å»¶é²
            const h = 100; 
            
            const rot = (Math.random() - 0.5) * 20;
            group.style.transform = `rotate(${rot}deg)`;

            placeItem(group, w, h, container, true);
        }

        function drawText(container) {
            const text = jpTexts[Math.floor(Math.random() * jpTexts.length)];
            const el = document.createElement('div');
            el.className = 'text-item';
            el.innerText = text;
            el.style.color = colors[Math.floor(Math.random() * colors.length)];
            el.style.fontSize = `${24 + Math.random() * 20}px`;
            el.style.fontFamily = Math.random() > 0.5 ? "'RocknRoll One'" : "'Yomogi'";
            
            const rot = (Math.random() - 0.5) * 40;
            el.style.transform = `rotate(${rot}deg)`;

            container.appendChild(el);
            placeItem(el, text.length * 30, 40, container);
        }

        function drawDoodle(container) {
            const data = doodles[Math.floor(Math.random() * doodles.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const size = 50 + Math.random() * 60; 
            
            const el = document.createElement('div');
            el.className = 'doodle-item';
            el.style.width = `${size}px`;
            el.style.height = `${size}px`;

            const isSticker = Math.random() < 0.1;
            let svgContent = '';
            
            if (isSticker) {
                el.classList.add('sticker-effect');
                if (data.type === 'stroke') {
                    svgContent = `<path d="${data.path}" stroke="${color}" stroke-width="${(data.strokeWidth||3)+4}" stroke-linecap="round" fill="none"/>
                                  <path d="${data.path}" stroke="white" stroke-width="${data.strokeWidth||3}" stroke-linecap="round" fill="none" stroke-dasharray="none"/>`;
                } else {
                    svgContent = `<path d="${data.path}" fill="${color}" stroke="white" stroke-width="8" stroke-linejoin="round"/>`;
                }
            } else {
                if (data.type === 'fill') {
                    svgContent = `<path d="${data.path}" fill="${color}" stroke="none"/>`;
                } else {
                    svgContent = `<path d="${data.path}" stroke="${color}" stroke-width="${data.strokeWidth || 3}" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`;
                }
            }

            el.innerHTML = `<svg viewBox="0 0 100 100" style="overflow:visible; width:100%; height:100%">${svgContent}</svg>`;

            const rot = (Math.random() - 0.5) * 60; 
            const scale = 0.8 + Math.random() * 0.5; 
            el.style.transform = `rotate(${rot}deg) scale(${scale}, ${scale})`;

            container.appendChild(el);
            placeItem(el, size, size, container);
        }

        function drawWobblyBorder(container) {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.style.position = 'absolute';
            svg.style.top = '0'; svg.style.left = '0'; svg.style.width = '100%'; svg.style.height = '100%';
            svg.style.zIndex = '5'; svg.style.pointerEvents = 'none';

            const color = colors[Math.floor(Math.random() * colors.length)];
            const pathStr = generateWobblyRect(20, 30, 300, 380);
            
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            path.setAttribute("d", pathStr);
            path.setAttribute("fill", "none");
            path.setAttribute("stroke", color);
            path.setAttribute("stroke-width", "3");
            path.setAttribute("stroke-linecap", "round");
            path.setAttribute("opacity", "0.6");

            svg.appendChild(path);
            container.appendChild(svg);
        }

        function generateWobblyRect(x, y, w, h) {
            const wiggle = () => (Math.random() - 0.5) * 8;
            return `M ${x + wiggle()} ${y + wiggle()} L ${x + w + wiggle()} ${y + wiggle()} L ${x + w + wiggle()} ${y + h + wiggle()} L ${x + wiggle()} ${y + h + wiggle()} Z`;
        }

        function placeItem(el, w, h, container, preferEdge = false) {
            const containerW = 340;
            const containerH = 540;
            const padding = 10;
            let found = false;

            for(let i=0; i<30; i++) {
                const left = Math.random() * (containerW - w - padding);
                const top = Math.random() * (containerH - h - padding);
                const newRect = { left, top, right: left + w, bottom: top + h };

                if (!checkCollision(newRect)) {
                    if (preferEdge && top > 100 && top < 400) {
                        if (Math.random() > 0.2) continue;
                    }
                    el.style.left = `${left}px`;
                    el.style.top = `${top}px`;
                    occupiedRects.push(newRect);
                    found = true;
                    break;
                }
            }
            if (!found) el.remove();
        }

        function checkCollision(r1) {
            const buffer = 5;
            for (let r2 of occupiedRects) {
                if (r1.left < r2.right + buffer && r1.right > r2.left - buffer && r1.top < r2.bottom + buffer && r1.bottom > r2.top - buffer) {
                    return true;
                }
            }
            return false;
        }

        window.onload = generateArt;
    </script>
</body>
</html>
